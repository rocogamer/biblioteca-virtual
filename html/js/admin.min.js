function firstLoadLogs($table){var xhttp;document.getElementById($table).innerHTML+="",(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById($table).innerHTML+=this.responseText)},xhttp.open("GET","../API/admintools/getLog.php",!0),xhttp.send()}function firstLoadUsers(table,btn){return $.ajax({type:"POST",url:"../API/admintools/getUsers.php",dataType:"text",data:{table:table,btn:btn},success:function(data,statusText,jqXHR){document.getElementById(table).innerHTML=data}}),!1}function firstLoadCategories(table,btn){return $.ajax({type:"POST",url:"../API/admintools/getCategoriesGestor.php",dataType:"text",data:{table:table,btn:btn},success:function(data,statusText,jqXHR){document.getElementById(table).innerHTML=data}}),!1}function deleteCategory(id,nombre){return $.ajax({type:"POST",url:"../API/admintools/removeCategoriesGestor.php",dataType:"text",data:{ID:id,Name:nombre},success:function(data,statusText,jqXHR){"Category deleted"==data?(document.getElementById("row_"+nombre+"_categorytabledelete").remove(),load()):alert("Ha habido un error al eliminar el usuario: "+data)}}),!1}function deleteCategoryBtn(btn){var strFormatedInput=btn.split("_")[1]+"_"+btn.split("_")[2],documentID="id_"+strFormatedInput,intID,docuemntUsername="nombre_"+strFormatedInput,strUsername;deleteCategory(Number(document.getElementById(documentID).innerHTML),document.getElementById(docuemntUsername).innerHTML)}function addCategoryBtn(){var nameBtn=document.getElementById("AddCategoryName").value;console.log(nameBtn),addCategory(nameBtn)}function editCategory(id,nombre){return $.ajax({type:"POST",url:"../API/admintools/editCategoriesGestor.php",dataType:"text",data:{ID:id,nombre:nombre},success:function(data,statusText,jqXHR){"Category edited"==data?(alert("Categoria editada"),load()):alert("Ha habido un error al editar la categoria: "+data)}}),!1}function EditCategoryBtn(){var idBtn,nameBtn;editCategory(document.getElementById("EditCategoryID").value,document.getElementById("EditCategoryName").value)}function deleteCatModalLoad(){firstLoadCategories("categorytabledelete",'<button type="button" class="btn btn-secondary" onclick="deleteCategoryBtn($(this).parent().attr(\'id\'))"><i class="bi bi-bookmark-dash"></i>Eliminar</button>')}function addCategory(nombre){return $.ajax({type:"POST",url:"../API/admintools/addCategoriesGestor.php",dataType:"text",data:{categoriesname:nombre},success:function(data,statusText,jqXHR){"Category added"==data?(alert("Categoria agregado"),load()):alert("Ha habido un error al editar la categoria: "+data)}}),!1}function editCategoryLoadBtn(btn){var strFormatedInput=btn.split("_")[1]+"_"+btn.split("_")[2],documentID="id_"+strFormatedInput,documentName="nombre_"+strFormatedInput;document.getElementById("EditCategoryID").value=Number(document.getElementById(documentID).innerHTML),document.getElementById("EditCategoryName").value=document.getElementById(documentName).innerHTML}function deleteUser(id,username){return $.ajax({type:"POST",url:"../API/admintools/removeUser.php",dataType:"text",data:{userID:id,username:username},success:function(data,statusText,jqXHR){"User deleted"==data?(document.getElementById("row_"+username+"_userstabledelete").remove(),load()):alert("Ha habido un error al eliminar el usuario: "+data)}}),!1}function addUser(name,username,pwd,bookpermission,categoriespermission,userspermission){return $.ajax({type:"POST",url:"../API/admintools/AddUser.php",dataType:"text",data:{name:name,username:username,pwd:pwd,bookpermission:bookpermission?"1":"0",categoriespermission:categoriespermission?"1":"0",userspermission:userspermission?"1":"0"},success:function(data,statusText,jqXHR){"User added"==data?(alert("Usuario agregado"),load()):alert("Ha habido un error al a√±adir el usuario: "+data)}}),!1}function addUserBtn(){var nameBtn,usernameBtn,pwdBtn,bookpermissionBtn,categoriespermissionBtn,userspermissionBtn;addUser(document.getElementById("AddUsername").value,document.getElementById("AddUserusername").value,document.getElementById("AddUserpwd").value,document.getElementById("AddUserbookpermission").checked,document.getElementById("AddUsercategoriespermission").checked,document.getElementById("AddUseruserspermission").checked)}function editUsersLoadBtn(btn){var strFormatedInput=btn.split("_")[1]+"_"+btn.split("_")[2],documentID="id_"+strFormatedInput,documentName="name_"+strFormatedInput,documentUsername="username_"+strFormatedInput,documentBookPermission="permbook_"+strFormatedInput,documentCategoriesPermission="permcat_"+strFormatedInput,documentUserPermission="permusr_"+strFormatedInput;documentBookPermission="Si"==document.getElementById(documentBookPermission).innerHTML,documentCategoriesPermission="Si"==document.getElementById(documentCategoriesPermission).innerHTML,documentUserPermission="Si"==document.getElementById(documentUserPermission).innerHTML,document.getElementById("EditUserID").value=Number(document.getElementById(documentID).innerHTML),document.getElementById("EditUsername").value=document.getElementById(documentName).innerHTML,document.getElementById("EditUserusername").value=document.getElementById(documentUsername).innerHTML,document.getElementById("EditUserbookpermission").checked=documentBookPermission,document.getElementById("EditUsercategoriespermission").checked=documentCategoriesPermission,document.getElementById("EditUseruserspermission").checked=documentUserPermission}function editUserBtn(){var idBtn,nameBtn,usernameBtn,pwdBtn,bookpermissionBtn,categoriespermissionBtn,userspermissionBtn;editUser(document.getElementById("EditUserID").value,document.getElementById("EditUsername").value,document.getElementById("EditUserusername").value,document.getElementById("EditUserpwd").value,document.getElementById("EditUserbookpermission").checked,document.getElementById("EditUsercategoriespermission").checked,document.getElementById("EditUseruserspermission").checked)}function editUser(id,name,username,pwd,bookpermission,categoriespermission,userspermission){return $.ajax({type:"POST",url:"../API/admintools/editUser.php",dataType:"text",data:{ID:id,name:name,username:username,pwd:pwd,bookpermission:bookpermission?"1":"0",categoriespermission:categoriespermission?"1":"0",userspermission:userspermission?"1":"0"},success:function(data,statusText,jqXHR){"User edited"==data?(alert("Usuario editado"),load()):alert("Ha habido un error al editar el usuario: "+data)}}),!1}function load(){firstLoadLogs("logstable"),firstLoadUsers("userstable",'<button type="button" class="btn btn-secondary" onclick="editUsersLoadBtn($(this).parent().attr(\'id\'))" data-bs-toggle="modal" data-bs-target="#modalEditUsers"><i class="bi bi-pencil-square"></i> Editar</button>'),firstLoadCategories("categoriestable",'<button type="button" class="btn btn-secondary" onclick="editCategoryLoadBtn($(this).parent().attr(\'id\'))" data-bs-toggle="modal" data-bs-target="#modalEditCategory"><i class="bi bi-pencil-square"></i> Editar</button>')}function deleteModalLoad(){firstLoadUsers("userstabledelete",'<button type="button" class="btn btn-secondary" onclick="deleteUsersBtn($(this).parent().attr(\'id\'))"><i class="bi bi-person-dash"></i>Eliminar</button>')}function deleteUsersBtn(btn){var strFormatedInput=btn.split("_")[1]+"_"+btn.split("_")[2],documentID="id_"+strFormatedInput,intID,docuemntUsername="username_"+strFormatedInput,strUsername;deleteUser(Number(document.getElementById(documentID).innerHTML),document.getElementById(docuemntUsername).innerHTML)}window.onload=load();